<%
response.setHeader("Cache-Control","no-store"); //HTTP 1.1
response.setHeader("Pragma","no-cache"); //HTTP 1.0
response.setDateHeader ("Expires", 0); //prevent caching at the proxy server
%>
<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <link rel="stylesheet" href="lib/jquery.mobile-1.0.css">
    <link rel="stylesheet" href="css/adventurio.css">

    <title>Adventurio</title>
    
</head>
<body>

	<div data-role="page" id="mainpage" data-url="#mainpage" data-position="fixed" >
			<div data-role="header">
				<h2>Stories</h2>
			</div>
			<div data-role="content">
				<ul id="listedStories" data-role="listview" data-theme="c" data-divendertheme="b">
				<script id="listAllStories_template" type="text/x-handlebars-template">
				{{#storyObjects}}
					<li id="storyLink">
						<a href="#viewstory?story={{_id}}" class="viewStoryLink" data-identity="story_{{_id}}" data-url="?story={{_id}}" >
							<h2 class="storyName">{{name}}</h2>
						</a>
						<p class="storyCreator">{{creator}}</p>
						<p class="storyCategory">{{tags}}</p>
					</li>
				{{/storyObjects}}
				</script>
				</ul>
			</div>
			<div data-role="footer" data-position="fixed">
				<a href="#createstory" data-role="button" data-icon="plus">Create New Story</a>
				Footer
			</div>
		</div>
		
	<div data-role="page" id="viewstory" data-url="#viewstory" data-position="inline" data-back="true">
			<div data-role="header" id="storyheader">
				<h2 class="storyname">Replaced</h2>
				<a href="#mainpage" data-icon="grid" class="ui-btn-right">Home</a>
			</div>
			<div data-role="content" id="viewStory_content" data-identity="{{storyId}}">
				<script id="showStory_template" type="text/x-handlebars-template">
					<h2 class="storyCreator"/>{{storyCreator}}</h2>
					<p class="storyName">Name: {{storyName}}</p>
					<p class="description">Description: {{storyDescription}}</p>
					<p class="tags">Tags: {{storyTags}}</p>
					<a id="viewstory_edit" href="index.html#editstory" data-role="button" data-inline="true"
						data-identity="story_{{value._id}}" data-url="?story={{storyId}}"
					>Edit Story</a> 
				</script>
			</div>
			<div data-role="footer">
				Footer
			</div>
		</div>
		
	<div data-role="page" id="createstory" data-url="createstory" data-position="inline" data-nobackbtn="true">
			<div data-role="header" id="createStory_header">
				<h2 class="storyname">Replaced</h2>
				<a id="cancelBackButton" href="#" data-icon="delete">Close</a>
			</div>
			<div data-role="content" id="createStory_content" data-identity="{{storyId}}" >
				<script id="createStory_template" type="text/x-handlebars-template">
				<form id="createStory_form" action="#" method="get" data-identity="{{document}}">
		            <div data-role="fieldcontain">
		                <label for="createStory_storyName">Name:</label>
		                <input id="createStory_storyName" name="storyName" type="text" value="{{storyName}}" />
		            </div>
		            <div data-role="fieldcontain">
		                <label for="createStory_description">Description:</label>
		                <textarea id="createStory_description" name="description" cols="40" rows="8">{{storyDescription}}</textarea>
		            </div>
		         	<div data-role="fieldcontain">
		                <label for="createStory_tags">Tags</label>
		                <input id="createStory_tags" name="tags" type="text" value="{{storyTags}}" />
			        </div>
		            
	            <div data-role="controlgroup" data-type="horizontal"> 
	            	<a href="#" id="cancelButton" data-role="button" >Cancel</a>
                 	<a href="#" id="submitButton" data-role="button" >Submit</a>
             	</div>
	        	</form>
		        </script>
			</div>
			<div data-role="footer">
				Footer
			</div>
		</div>
		
		<div data-role="page" id="editstory" data-url="editstory" data-position="inline" data-nobackbtn="true">
			<div data-role="header" id="editStory_header">
				<h2 class="storyname">Replaced</h2>
				<a id="cancelBackButton" href="#" data-icon="delete">Close</a>
			</div>
			<div data-role="content" id="editStory_content" data-identity="{{storyId}}" >
				<script id="editStory_template" type="text/x-handlebars-template">
				</script>
			</div>
			<div data-role="footer">
			</div>
		</div>
		
		
		<div data-role="page" id="createpage" data-url="createpage" data-position="inline" data-nobackbtn="true">
			<div data-role="header" id="createPage_header">
				<h2 class="storyname">Replaced</h2>
				<a id="cancelBackButton" href="#" data-icon="delete">Close</a>
			</div>
			<div data-role="content" id="createPage_content" data-identity="{{storyId}}" >
			</div>
			<div data-role="footer">
				Footer
			</div> 
		</div>

<!--
/********************************************************
*  Script management
*********************************************************/
-->

	<script type="text/javascript" src="lib/LAB.js"></script>
	<script type="text/javascript" src="scripts.js"></script>

</body>
</html>
